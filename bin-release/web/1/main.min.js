var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},EggUI=function(t){function e(){var e=t.call(this)||this;return e.roleType=RoleType.egg,e.initView(),e}return __extends(e,t),e.prototype.initView=function(){var e=Helper.getBitmap(R.egg_png);t.prototype.addChild.call(this,e)},e}(egret.Sprite);__reflect(EggUI.prototype,"EggUI");var TapEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e}(egret.Event);TapEvent.NAME="TapEvent",__reflect(TapEvent.prototype,"TapEvent");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.createGameScene=function(){Helper.width=this.stage.stageWidth,Helper.height=this.stage.stageHeight,this.addBeginUI(),RES.loadGroup("gameui")},e.prototype.addBeginUI=function(){var t=this;BeginUI.addBeginUI(this,function(){t.addGameUI()})},e.prototype.addGameUI=function(){GameUI.addGameUI(this,function(){})},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var BarUI=function(t){function e(){var e=t.call(this)||this;return e.initView(),e}return __extends(e,t),e.prototype.initView=function(){var e=Helper.getBitmap(R.great_bg_png);Helper.ObjectCenterX(e),e.y+=30,t.prototype.addChild.call(this,e),this.markTxt=new egret.TextField,this.markTxt.y+=45,this.markTxt.x=250,t.prototype.addChild.call(this,this.markTxt),this.timeTxt=new egret.TextField,this.timeTxt.y+=45,this.timeTxt.x=520,t.prototype.addChild.call(this,this.timeTxt)},e}(egret.Sprite);__reflect(BarUI.prototype,"BarUI");var BeginUI=function(t){function e(){var e=t.call(this)||this;return e.tabEvent=new TapEvent(TapEvent.NAME),e.initView(),e}return __extends(e,t),e.prototype.initView=function(){this.addBg(),this.addTitle(),this.addBtn()},e.prototype.addBg=function(){var e=Helper.getBitmap(R.begin_bg_jpg,720,1155);t.prototype.addChild.call(this,e)},e.prototype.addBtn=function(){var e=this;this.btn=Helper.getBitmap(R.begin_btn_png),Helper.ObjectCenterX(this.btn),this.btn.y=Helper.height-200,this.btn.y+=500,t.prototype.addChild.call(this,this.btn),this.btn.touchEnabled=!0,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.dispatchEvent(e.tabEvent)},this)},e.prototype.addTitle=function(){this.title=Helper.getBitmap(R.begin_title_png),Helper.ObjectCenter(this.title),this.title.y-=1e3,t.prototype.addChild.call(this,this.title)},e.prototype.beginAnimation=function(){egret.Tween.get(this.title).to({y:this.title.y+1e3},1e3,egret.Ease.sineOut),egret.Tween.get(this.btn).to({y:this.btn.y-500},1e3,egret.Ease.sineOut)},e.prototype.finishAnimation=function(t){egret.Tween.get(this.title).to({y:this.title.y-1e3},1e3,egret.Ease.sineIn),egret.Tween.get(this.btn).to({y:this.btn.y+500},1e3,egret.Ease.sineIn).call(t)},e.addBeginUI=function(t,i){var n=new e;t.addChild(n),n.beginAnimation(),n.addEventListener(TapEvent.NAME,function(){n.finishAnimation(function(){i(),t.removeChild(n)})},this)},e}(egret.Sprite);__reflect(BeginUI.prototype,"BeginUI");var BtnBreakUI=function(t){function e(){var e=t.call(this)||this,i=Helper.getBitmap(R.game_btn_break_png);return t.prototype.addChild.call(e,i),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var i=Helper.getBitmap(R.chuizi_png);i.y-=100,t.prototype.addChild.call(e,i),egret.Tween.get(i).to({x:i.x-=150},100).to({x:0},100).call(function(){t.prototype.removeChild.call(e,i)})},e),e}return __extends(e,t),e}(egret.Sprite);__reflect(BtnBreakUI.prototype,"BtnBreakUI");var BtnGetUI=function(t){function e(){var e=t.call(this)||this,i=Helper.getBitmap(R.game_btn_get_png);return t.prototype.addChild.call(e,i),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var i=Helper.getBitmap(R.hand_png);i.y-=100,t.prototype.addChild.call(e,i),egret.Tween.get(i).to({x:i.x+=150},100).to({x:0},100).call(function(){t.prototype.removeChild.call(e,i)})},e),e}return __extends(e,t),e}(egret.Sprite);__reflect(BtnGetUI.prototype,"BtnGetUI");var TimeOutEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e}(egret.Event);TimeOutEvent.NAME="TimeOutEvent",__reflect(TimeOutEvent.prototype,"TimeOutEvent");var GameUI=function(t){function e(){var e=t.call(this)||this;return e.rabbitEggList=new Array,e.initView(),e}return __extends(e,t),e.prototype.initView=function(){var t=this;this.addBg(),this.addBtn(),this.addBar();var e=new egret.Timer(500,0);e.addEventListener(egret.TimerEvent.TIMER,this.addRole,this),e.start();var i=new egret.Timer(1e3,0);i.addEventListener(egret.TimerEvent.TIMER,function(){t.barUI.timeTxt.text=new Number(t.barUI.timeTxt.text).valueOf()-1+"",new Number(t.barUI.timeTxt.text).valueOf()<0&&(e.stop(),i.stop(),t.dispatchEvent(new TimeOutEvent(TimeOutEvent.NAME)))},this),i.start()},e.prototype.addBg=function(){var e=Helper.getBitmap(R.begin_bg_jpg,720,1155);t.prototype.addChild.call(this,e)},e.prototype.addBtn=function(){var e=this,i=new BtnGetUI;Helper.ObjectCenterX(i),i.x-=220,i.y=Helper.height-250,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.btnTap(RoleType.rabbit)},this),t.prototype.addChild.call(this,i);var n=new BtnBreakUI;Helper.ObjectCenterX(n),n.x+=220,n.y=Helper.height-250,n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.btnTap(RoleType.egg)},this),t.prototype.addChild.call(this,n)},e.prototype.addBar=function(){this.barUI=new BarUI,this.barUI.markTxt.text="0",this.barUI.timeTxt.text="25",t.prototype.addChild.call(this,this.barUI)},e.prototype.addRole=function(){var e,i=this,n=Math.floor(10*Math.random())%2;switch(n){case 0:e=new RabbitUI;break;default:e=new EggUI}Helper.ObjectCenterX(e);var r=e.x;e.y=600,e.scaleX=.3,e.scaleY=.3,e.x=.5*(Helper.width-.3*e.width),t.prototype.addChildAt.call(this,e,1),this.rabbitEggList.push(e),egret.Tween.get(e).to({y:Helper.height-300,scaleX:1,scaleY:1,x:r},1200,egret.Ease.circIn).to({y:Helper.height},200,egret.Ease.circInOut).call(function(){i.rabbitEggList.shift(),t.prototype.removeChild.call(i,e)})},e.addGameUI=function(t,i){var n=new e;t.addChild(n),n.addEventListener(TimeOutEvent.NAME,function(){alert("得分："+n.barUI.markTxt.text+"获得宝马一辆"),t.removeChild(n)},this)},e.prototype.btnTap=function(t){var e=this;this.rabbitEggList.forEach(function(i){if(i.hitTestPoint(Helper.width/2,Helper.height-300)){var n=i;return void(t==n.roleType?e.barUI.markTxt.text=new Number(e.barUI.markTxt.text).valueOf()+10+"":e.barUI.markTxt.text=new Number(e.barUI.markTxt.text).valueOf()-10+"")}})},e}(egret.Sprite);__reflect(GameUI.prototype,"GameUI");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=577.5,this.textField.width=720,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var RabbitUI=function(t){function e(){var e=t.call(this)||this;return e.roleType=RoleType.rabbit,e.initView(),e}return __extends(e,t),e.prototype.initView=function(){var e=Helper.getBitmap(R.rabbit_png);t.prototype.addChild.call(this,e)},e}(egret.Sprite);__reflect(RabbitUI.prototype,"RabbitUI");var Helper=function(){function t(){}return t.getBitmap=function(t,e,i,n,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=null);var o=new egret.Bitmap(RES.getRes(t));return null!=e&&(o.width=e),null!=i&&(o.height=i),null!=n&&(o.x=n),null!=r&&(o.y=r),o},t.ObjectCenterX=function(t){t.x=(this.width-t.width)/2},t.ObjectCenterY=function(t){t.y=(this.width-t.height)/2},t.ObjectCenter=function(t){t.x=(this.width-t.width)/2,t.y=(this.height-t.height)/2},t}();Helper.width=720,Helper.height=1155,__reflect(Helper.prototype,"Helper");var R=function(){function t(){}return t}();R.begin_bg_jpg="bg_png",R.begin_btn_png="begin_btn_png",R.game_bg_jpg="bg_png",R.begin_title_png="begin_title_png",R.game_btn_break_png="game_btn_break_png",R.game_btn_get_png="game_btn_get_png",R.egg_png="egg_png",R.rabbit_png="rabbit_png",R.great_bg_png="great_bg_png",R.hand_png="hand-_png",R.chuizi_png="chuizi_png",__reflect(R.prototype,"R");var RoleType;!function(t){t[t.rabbit=0]="rabbit",t[t.egg=1]="egg"}(RoleType||(RoleType={}));